@using Microsoft.AspNetCore.Http

@{
    CommunityModel Comunidad = Html.GetComunidad();
}

@* JS y libererías para el sitio web - Theme *@
<!-- JQUERY -->
<script src="//code.jquery.com/jquery-3.7.1.min.js" 
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" 
        crossorigin="anonymous"></script>

<!-- JQUERYUI -->
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"
        integrity="sha256-xLD7nhI62fcsEZK2/v8LsBcb4lG7dgULkuXoXB/j91c="
        crossorigin="anonymous"></script>

<!-- Waypoints (Scrolling) -->
<script type="text/javascript"
        src="@Html.GetBaseUrlStatic()/responsive/theme/libraries/waypoints/jquery.waypoints.min.js?v=@Html.GetVersion()"></script>

<!-- POPPER + BOOTSTRAP 4 + PROPELLER -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script src="@Html.GetBaseUrlStatic()/responsive/theme/libraries/bootstrap/bootstrap.min.js?v=@Html.GetVersion()"></script>
<script src="@Html.GetBaseUrlStatic()/responsive/theme/libraries/propeller/js/propeller.js?v=@Html.GetVersion()"></script>

<!-- TinyMCE V6 -->
<script type="text/javascript"
        src="@Html.GetBaseUrlStatic()/tinymce/js/tinymce/tinymce.min.js?v=@Html.GetVersion()"></script>

<!-- TinyMCE Config -->
<script type="text/javascript"
        src="@Html.GetBaseUrlStatic()/tinymce/js/tinymce/tinymceConfig.js?v=@Html.GetVersion()"></script>

<!-- Zooming -->
<script type="text/javascript"
        src="@Html.GetBaseUrlStatic()/responsive/theme/libraries/zooming/zooming.min.js?v=@Html.GetVersion()"></script>

<!-- UNIFICADO JS -->
<script type="text/javascript" src="@Html.GetBaseUrlStatic()/js/unificado.js?v=@Html.GetVersion()"></script>

<!-- AUTOCOMPLETE -->
<script type="text/javascript"
        src="@Html.GetBaseUrlStatic()/responsive/theme/libraries/autocomplete/jquery.autocomplete.js?v=@Html.GetVersion()"></script>

<!-- LIGHTGALLERY -->
<script type="text/javascript"
        src="@Html.GetBaseUrlStatic()/responsive/theme/libraries/lightgallery/js/lightgallery-all.min.js?v=@Html.GetVersion()"></script>

<!-- DATATABLES -->
<script type="text/javascript"
        src="https://cdn.datatables.net/v/bs4/dt-1.11.3/b-2.1.1/b-html5-2.1.1/fc-4.0.1/fh-3.2.1/r-2.2.9/sc-2.0.5/sl-1.3.4/datatables.min.js"></script>

<!-- CUSTOM SCROLLBAR -->
<script type="text/javascript"
        src="@Html.GetBaseUrlStatic()/responsive/theme/libraries/customscroller/js/jquery.mCustomScrollbar.concat.min.js?v=@Html.GetVersion()"></script>

<!-- JQUERY PROGRESS BAR TIME -->
<!-- Documentación: https://www.jqueryscript.net/time-clock/Countdown-Timers-Bootstrap-4-Progressbar.html -->
<script type="text/javascript"
        src="@Html.GetBaseUrlStatic()/responsive/theme/libraries/progressBarTime/jquery.progressBarTimer.min.js?v=@Html.GetVersion()"></script>

<!-- JQUERY SLIDE REVEAL -->
<script type="text/javascript"
        src="@Html.GetBaseUrlStatic()/responsive/theme/libraries/slidereveal/jquery.slidereveal.min.js?v=@Html.GetVersion()"></script>

<!-- SELECT2 -->
<script type="text/javascript"
        src="@Html.GetBaseUrlStatic()/responsive/theme/libraries/select2/js/select2.min.js?v=@Html.GetVersion()"></script>

<!-- MomentJS -->
<script type="text/javascript"
        src="@Html.GetBaseUrlStatic()/responsive/theme/libraries/momentJS/moment.js?v=@Html.GetVersion()"></script>
<script type="text/javascript"
        src="@Html.GetBaseUrlStatic()/responsive/theme/libraries/momentJS/moment-timezone-with-data.js?v=@Html.GetVersion()"></script>

<!-- Toastr -->
<script type="text/javascript"
        src="@Html.GetBaseUrlStatic()/responsive/theme/libraries/toastr/toastr.min.js?v=@Html.GetVersion()"></script>

<!-- Google no cookies -->
<script type="text/javascript"
        src="@Html.GetBaseUrlStatic()/responsive/theme/cookies/googleNoCookies.js?v=@Html.GetVersion()"></script>

<!-- Simple Donut -->
<script type="text/javascript"
        src="@Html.GetBaseUrlStatic()/responsive/theme/libraries/simple-donut/simple-donut.js?v=@Html.GetVersion()"></script>

<!-- Owl Carousel -->
<script type="text/javascript"
        src="@Html.GetBaseUrlStatic()/responsive/theme/libraries/owl-carousel/js/owl.carousel.min.js?v=@Html.GetVersion()"></script>

<!-- BusyLoad - Vistas para Loading -->
<script type="text/javascript"
        src="@Html.GetBaseUrlStatic()/responsive/theme/libraries/busy-load/app.min.js?v=@Html.GetVersion()"></script>

<!-- PERSONALIZACION JS TEMA  -->
<script type="text/javascript"
        src="@Html.GetBaseUrlStatic()/responsive/theme/theme.js?v=@Html.GetVersion()"></script>

<!-- Visualizador Prism para Code en TinyMCE -->
<script type="text/javascript"
        src="@Html.GetBaseUrlStatic()/responsive/theme/prism/prism.js?v=@Html.GetVersion()"></script>

<!-- Dirty Form -->
<script type="text/javascript"
        src="@Html.GetBaseUrlStatic()/responsive/theme/libraries/dirty-form/jquery.dirty.js?v=@Html.GetVersion()"></script>

<!-- Chartjs -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Google Charts -->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script>
    google.charts.load('current', { 'packages': ['table'] });
</script>

<!-- Highcharts -->
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/heatmap.js"></script>



@* JS insertados en unificados
       ---------------------------
    <script type="text/javascript" src="@Html.GetBaseUrlStatic()/jsUnificar/jquery.ui.core.min.js?v=@Html.GetVersion()"></script>
    <script type="text/javascript" src="@Html.GetBaseUrlStatic()/jsUnificar/jquery.ui.datepicker.min.js?v=@Html.GetVersion()"></script>

    <script type="text/javascript" src="@Html.GetBaseUrlStatic()/jsUnificar/global.js?v=@Html.GetVersion()"></script>
    <script type="text/javascript" src="@Html.GetBaseUrlStatic()/jsUnificar/custom.js?v=@Html.GetVersion()"></script>
    <script type="text/javascript" src="@Html.GetBaseUrlStatic()/jsUnificar/ejemplosUso.js?v=@Html.GetVersion()"></script>
    <script type="text/javascript" src="@Html.GetBaseUrlStatic()/jsUnificar/busquedas.js?v=@Html.GetVersion()"></script>
    <script type="text/javascript" src="@Html.GetBaseUrlStatic()/jsUnificar/opcionesDestacadasMenuLateral.js?v=@Html.GetVersion()"></script>
    <script type="text/javascript" src="@Html.GetBaseUrlStatic()/jsUnificar/WS.js?v=@Html.GetVersion()"></script>
    <script type="text/javascript" src="@Html.GetBaseUrlStatic()/jsUnificar/listToSelect.jquery.js?v=@Html.GetVersion()"></script>
    <script type="text/javascript" src="@Html.GetBaseUrlStatic()/jsUnificar/jMsAjax.js?v=@Html.GetVersion()"></script>
    <script type="text/javascript" src="@Html.GetBaseUrlStatic()/jsNuevo/jquery.gnoss.utils.js?v=@Html.GetVersion()"></script>
    <script type="text/javascript" src="@Html.GetBaseUrlStatic()/jsNuevo/jquery.gnoss.apply.js?v=@Html.GetVersion()"></script>
    <script type="text/javascript" src="@Html.GetBaseUrlStatic()/jsNuevo/jquery.gnoss.header.js?v=@Html.GetVersion()"></script>
    <script type="text/javascript" src="@Html.GetBaseUrlStatic()/jsNuevo/waypoints.min.js?v=@Html.GetVersion()"></script>

    <script type="text/javascript" src="@Html.GetBaseUrlStatic()/jsUnificar/MVC.FichaDocumento.js?v=@Html.GetVersion()"></script>
    <script type="text/javascript" src="@Html.GetBaseUrlStatic()/jsUnificar/MVC.FichaPerfil.js?v=@Html.GetVersion()"></script>
    <script type="text/javascript" src="@Html.GetBaseUrlStatic()/jsUnificar/MVC.Registro.js?v=@Html.GetVersion()"></script>
    <script type="text/javascript" src="@Html.GetBaseUrlStatic()/jsUnificar/MVC.Comun.js?v=@Html.GetVersion()"></script>
    <script type="text/javascript" src="@Html.GetBaseUrlStatic()/jsUnificar/MVC.ComAdmin.js?v=@Html.GetVersion()"></script>
*@

@{
    string idioma = Html.GetUtilIdiomas().LanguageCode;

    if (idioma.Contains("-"))
    {
        idioma = idioma.Substring(0, idioma.IndexOf('-'));
    }
}
<script type="text/javascript" src="@Html.GetBaseUrlStatic()/lang/@idioma/text.js?v=@Html.GetVersion()"></script>


@if (Html.GetListaJS() != null)
{
    foreach (string js in Html.GetListaJS())
    {
        if (js.StartsWith("defer/"))
        {
            <script type="text/javascript" src="@js.Substring(6)" defer="defer"></script>
        }
        else
        {
            <script type="text/javascript" src="@js"></script>
        }
    }
}

@Html.PartialView("../Shared/Head/_FicherosJavascriptPersonalizado")

@* Código Google Analytics*@
@if (Html.GetGoogleAnalytics() != null && Context.Request.Cookies["analiticas"] != null && Context.Request.Cookies["analiticas"].Equals("yes"))
{
    if (Comunidad.IntegracionContinuaActivada)
    {
        if (Comunidad.EntornoEsPro)
        {
            <script type="text/javascript">@Html.Raw(Html.GetGoogleAnalytics())</script>
        }
    }
    else
    {
        <script type="text/javascript">    @Html.Raw(Html.GetGoogleAnalytics())</script>
    }

}
else if (!string.IsNullOrEmpty(@Html.GetGoogleAnalyticsCode()))
{
    <script>
        $(document).ready(function () {
            contarVisitaNoCookie("@Html.GetGoogleAnalyticsCode()");
        });
    </script>
}

<script type="text/javascript">
    var metaEtiquetasOntologia = '@Html.Raw(Html.GetMetaEtiquetasXMLOntologias())';
    var metaEtiquetasOntologiaJSON = JSON.parse(metaEtiquetasOntologia);
</script>